{% extends "base.html" %}
{% block content %}
<div class="card p-4">
  <h3>Phân Công Giải Chạy - {{ target_user.username }}</h3>
  <p class="text-muted">Chọn các giải chạy mà người dùng này có quyền truy cập</p>
  
  <form method="post">
    <div class="mb-3">
      <label class="form-label fw-bold">Giải chạy được phân công:</label>
      {% if all_marathons %}
        {% for marathon in all_marathons %}
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="marathons" value="{{ marathon.id }}" id="marathon_{{ marathon.id }}"
            {% if marathon in target_user.assigned_marathons %}checked{% endif %}>
          <label class="form-check-label" for="marathon_{{ marathon.id }}">
            {{ marathon.name }}
          </label>
        </div>
        {% endfor %}
      {% else %}
        <p class="text-muted">Chưa có giải chạy nào. Vui lòng tạo giải chạy trước.</p>
      {% endif %}
    </div>
    
    <div class="d-flex gap-2">
      <button type="submit" class="btn btn-primary">Lưu</button>
      <a href="{{ url_for('admin_users') }}" class="btn btn-secondary">Hủy</a>
    </div>
  </form>
</div>
{% endblock %}
